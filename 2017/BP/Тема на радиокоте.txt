Здравствуйте.
Прошу вас проверить схему трансформаторного блока питания с управлением на atmega8.
Правая часть - блок управления на МК.
Обратная связь с аналоговой частью реализуется через коннектор J11, подключенного к шунту амперметра. Снимается напряжение с шунта, усиливается через ОУ LM358 и подается на 2 входа МК. 
пин PD7 - вход компаратора. Сравнивается напряжение с делителя R26-R29 и в случае КЗ в МК происходит прерывание.
пин PC0 - вход счетчика ампер часов. Особая точность не нужна.

Управление реализуется через связку пин PB3-J5-J8-TC4428-IRLZ44N.
На пин PB3 может подаваться ШИМ или постоянный ток. Ну или медленно изменяющиеся импульсы.
Вывод информации пользователю реализуется через 8 сегментный 4 секционный светодиодный дисплей (коннектор J1)
Ввод информации реализуется через 3 кнопки (коннектор J9)

В правой части реализованы 3 одинаковых источника питания на LM317 (2 штуки) LM338 (1 штука). LM338 вынесена на радиатор, поэтому на схеме вместо нее коннектор J4.

Нижняя LM317 отвечает за питание МК. Питается от ~5в.
Средняя LM317 отвечает за питание TC4428 (раскачивает ИРку). Питается от ~10в.
Верхняя LM338 непосредственно сам регулируемый блок питания. Питается от ~1-25в с 3 точками (2 переключателя на разное напряжение).

Источник переменного тока - трансформатор ТН56.

В принципе, все просто. Но мог допустить ошибки.
И вопрос насчет TC4428. БП на 90% будет использоваться с постоянным напряжением (без ШИМа или с ШИМ с глубиной 100%), драйверу будет норм?

Спасибо.

[url=http://img.radiokot.ru/files/120932/medium/15zor26tqs.jpg][img]http://img.radiokot.ru/files/120932/thumbnail/15zor26tqs.jpg[/img][/url]